Name: maliit-framework
Summary: Core libraries of Maliit and server
Version: 0.99.0
Release: 1
Group: System/Libraries
License: LGPLv2.1
URL: http://gitorious.org/maliit/maliit-framework
SetupOptions: -q -n maliit-framework-0.99.0
Sources:
    - "%{name}-%{version}.tar.bz2"
Patches:
    - enable-systemd-activation.patch
ExtraSources:
    - maliit-server.sh;%{_sysconfdir}/profile.d
    - maliit-server.service;%{_libdir}/systemd/user/
    
Description: |
    Core libraries of Maliit and server
Requires:
    - dbus-x11
    - qt5-plugin-platform-inputcontext-maliit
    - qt5-qtdeclarative-import-qtquick2plugin
    - qt5-plugin-platform-xcb
PkgConfigBR:
    - Qt5Core
    - Qt5Widgets
    - Qt5DBus
    - Qt5Quick
    - Qt5Test
    - x11
    - xcomposite
    - xdamage
    - xext
    - xfixes
    - libudev
Obsoletes:
    - libmaliit-quick
Configure: none
SetupOptions: -q -n %{name}-%{version}/maliit-framework
Builder: qmake5
QMakeOptions:
    - CONFIG+=enable-dbus-activation
    - CONFIG+=qt5-inputcontext

Files:
    - "%{_bindir}/maliit-server"
    - "%{_libdir}/libmaliit-plugins.so*"
    - "%{_datadir}/dbus-1/services/org.maliit.server.service"
    - "%config %{_sysconfdir}/profile.d/maliit-server.sh"
    - "%{_libdir}/systemd/user/maliit-server.service"
RunFdupes:
    - "%{_libdir}"
SubPackages:
    - Name: inputcontext
      Summary: Qt5 plugin for connecting to Maliit input method server
      Group: System/Libraries
      Description: |
          This package contains loadable plugin for Qt5 which allows to connect
          to Maliit input method server
      Provides:
          - qt5-plugin-platform-inputcontext-maliit
      Obsoletes:
          - qt5-plugin-platform-inputcontext-maliit
      Files:
          - "%{_libdir}/qt5/plugins/platforminputcontexts/*.so"

    - Name: devel
      Summary: Maliit Framework Input Method Development Package
      Group: Development/Libraries
      Description: |
          This package contains the files necessary to develop
          input method plugins using Maliit
      Files:
          - "%{_includedir}/maliit/*"
          - "%{_libdir}/pkgconfig/*.pc"
          - "%{_datadir}/qt5/mkspecs/features/*"

    - Name: doc
      Summary: Maliit Framework Documentation
      Group: Development/Libraries
      Description: Documentation for the Maliit Input Method Framework
      Files:
          - "%{_docdir}/maliit-framework/html"

    - Name: examples
      Summary: Maliit Framework Input Method Examples
      Group: Development/Libraries
      Description: |
          This package contains examples applications for
          the Maliit input method framework
      Files:
          - "%{_bindir}/maliit-exampleapp-plainqt"

    - Name: tests
      Summary: Maliit Framework Input Method Tests Package
      Group: Development/Libraries
      Description: |
          This package contains the files necessary to test
          the Maliit input method framework
      Files:
          - "%{_libdir}/maliit-framework-tests/"

